@model PagedList<QueueItem>
@{

}
<form method="post">
    <button formaction="@Url.Action(nameof(HomeController.EnqueueEmail))" class="btn btn-primary">Enqueue Email</button>
    <button formaction="@Url.Action(nameof(HomeController.EnqueueReport))" class="btn btn-primary">Enqueue Report</button>
</form>
<table class="table">
    <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Created</th>
            <th>Started</th>
            <th>Completed</th>
            <th>Status</th>
            <th>Log</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var queueItem in Model.Items)
        {
            <tr>
                <td>@queueItem.Id</td>
                <td>@queueItem.Name</td>
                <td>@queueItem.Created</td>
                <td>@queueItem.Started</td>
                <td>@queueItem.Completed</td>
                <td>
                    @if (queueItem.Status == QueueItem.ERROR)
                    {
                        <span class="label label-danger">@queueItem.Status</span>
                    }
                    else if (queueItem.Status == QueueItem.COMPLETED)
                    {
                        <span class="label label-success">@queueItem.Status</span>
                    }
                    else
                    {
                        <span class="label label-warning">@queueItem.Status</span>
                    }
                </td>
                <td>
                    @if (queueItem.Log != null)
                    {
                        <pre>@queueItem.Log</pre>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
<nav aria-label="Page navigation">
    <ul class="pagination">
        @if (Model.PageNumber > 1)
        {
            <li>
                <a href="@(new Url(Request.Url).Add(nameof(QueryQueueItems.PageNumber), Model.PageNumber - 1))" aria-label="Previous">
                    <span aria-hidden="true">&larr; Previous</span>
                </a>
            </li>
        }
        else
        {
            <li class="disabled">
                <span aria-label="Previous">
                    <span aria-hidden="true">&larr; Previous</span>
                </span>
            </li>
        }
        <li class="active">
            <span>Page @Model.PageNumber <span class="sr-only">(current)</span></span>
        </li>
        <li class="disabled">
            <span>
                <span aria-hidden="true">@Model.TotalItems Total Item(s)</span>
            </span>
        </li>
        @if (Model.PageNumber * Model.PageSize >= Model.TotalItems)
        {
            <li class="disabled">
                <span aria-label="Next">
                    <span aria-hidden="true">Next &rarr;</span>
                </span>
            </li>
        }
        else
        {
            <li>
                <a href="@(new Url(Request.Url).Add(nameof(QueryQueueItems.PageNumber), Model.PageNumber + 1))" aria-label="Next">
                    <span aria-hidden="true">Next &rarr;</span>
                </a>
            </li>
        }
    </ul>
</nav>
